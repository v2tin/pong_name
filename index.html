<!DOCTYPE html>
<html>
<head>
    <title>Pong Game</title>
    <style>
        body { margin: 0; overflow: hidden; background: #000; }
        canvas { display: block; margin: 0 auto; }
        .score { 
            color: white; 
            font-size: 32px; 
            text-align: center; 
            font-family: Arial;
            padding: 20px;
        }
    </style>
</head>
<body>
    <div class="score">
        <span id="player1">0</span> - <span id="player2">0</span>
    </div>
    <canvas id="gameCanvas" width="800" height="500"></canvas>

    <script>
        // 游戏代码
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        
        // 游戏状态
        const state = {
            paddles: {
                left: { x: 30, y: 200, width: 15, height: 100, speed: 8 },
                right: { x: 755, y: 200, width: 15, height: 100, speed: 8 }
            },
            ball: { x: 400, y: 250, radius: 10, dx: 4, dy: 4 },
            scores: { player1: 0, player2: 0 },
            keys: {}
        };

        // 事件监听
        window.addEventListener('keydown', (e) => state.keys[e.key] = true);
        window.addEventListener('keyup', (e) => state.keys[e.key] = false);

        // 游戏循环
        function gameLoop() {
            update();
            render();
            requestAnimationFrame(gameLoop);
        }

        function update() {
            // 移动挡板
            if (state.keys['w'] && state.paddles.left.y > 0) 
                state.paddles.left.y -= state.paddles.left.speed;
            if (state.keys['s'] && state.paddles.left.y < canvas.height - state.paddles.left.height) 
                state.paddles.left.y += state.paddles.left.speed;
            if (state.keys['ArrowUp'] && state.paddles.right.y > 0) 
                state.paddles.right.y -= state.paddles.right.speed;
            if (state.keys['ArrowDown'] && state.paddles.right.y < canvas.height - state.paddles.right.height) 
                state.paddles.right.y += state.paddles.right.speed;

            // 移动球
            state.ball.x += state.ball.dx;
            state.ball.y += state.ball.dy;

            // 边界检测
            if (state.ball.y - state.ball.radius < 0 || state.ball.y + state.ball.radius > canvas.height) {
                state.ball.dy = -state.ball.dy;
            }

            // 得分检测
            if (state.ball.x - state.ball.radius < 0) {
                state.scores.player2++;
                document.getElementById('player2').textContent = state.scores.player2;
                resetBall();
            }
            if (state.ball.x + state.ball.radius > canvas.width) {
                state.scores.player1++;
                document.getElementById('player1').textContent = state.scores.player1;
                resetBall();
            }

            // 挡板碰撞检测
            paddleCollision(state.paddles.left);
            paddleCollision(state.paddles.right);
        }

        function paddleCollision(paddle) {
            if (state.ball.x - state.ball.radius < paddle.x + paddle.width &&
                state.ball.x + state.ball.radius > paddle.x &&
                state.ball.y + state.ball.radius > paddle.y &&
                state.ball.y - state.ball.radius < paddle.y + paddle.height) {
                state.ball.dx = -state.ball.dx;
            }
        }

        function resetBall() {
            state.ball.x = canvas.width / 2;
            state.ball.y = canvas.height / 2;
            state.ball.dx = -state.ball.dx;
            state.ball.dy = Math.random() > 0.5 ? 4 : -4;
        }

        function render() {
            // 清空画布
            ctx.fillStyle = 'black';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // 绘制挡板
            ctx.fillStyle = 'white';
            ctx.fillRect(state.paddles.left.x, state.paddles.left.y, 
                        state.paddles.left.width, state.paddles.left.height);
            ctx.fillRect(state.paddles.right.x, state.paddles.right.y, 
                        state.paddles.right.width, state.paddles.right.height);
            
            // 绘制球
            ctx.beginPath();
            ctx.arc(state.ball.x, state.ball.y, state.ball.radius, 0, Math.PI * 2);
            ctx.fill();
        }

        // 开始游戏
        gameLoop();
    </script>
</body>
</html>